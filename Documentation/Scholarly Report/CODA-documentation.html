<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>CODA (COVID-19 Data for ALL)</title>
    <link rel="stylesheet" href="documentation.css">
</head>
<body prefix="schema: http://schema.org">
    <article typeof="schema:ScholarlyArticle" resource="#">
        <header>
            <h1 property="schema:name"> CODA (COVID-19 Data for ALL)
            </h1>
        </header>
        <div role="contentinfo">
            <dl>
                <dt>Authors</dt>
                <dd>
                    TOG-team: Grosu Teodora, Hriscu Oana, Schițcu Gabriel
                </dd>
            </dl>
        </div>
        <section typeof="sa:content" id="content">
            <h2>Content</h2>
            <aside typeof="schema:WPSideBar">
                <ol>
                    <li>
                        <a href="#introduction">Introduction</a>
                    </li>
                    <li>
                        <a href="#technology-stack">Technology stack</a>
                    </li>
                    <li>
                        <a href="#microservices">Microservices and Architecture</a>
                    </li>
                    <li>
                        <a href="#implementation-logic">Implementation Logic</a>
                    </li>
                    <li>
                        <a href="#user-journey">User journey</a>
                    </li>
                    <li>
                        <a href="#ontology">Ontology and Vocabularies</a>
                    </li>
                    <li>
                        <a href="#sparql">Accessing RDF Graph data using SPARQL</a>
                    </li>
                </ol>
            </aside>
        </section>
        <section typeof="sa:Results" id="introduction">
            <h2>1. Introduction</h2>
            <h3>About CODA</h3>
            <blockquote>
                <p>
                    CODA stands for COVID-19 Data for All. It is a smart micro-service-based web system that is able to provide information regarding the Covid-19 pandemic in multiple written and visual formats for both specialists and the general public. Every data collected by CODA such as articles, documents and graphics, contains attested pieces of information which can be easily viewed, downloaded and shared to other platforms. Moreover, everything on CODA can be accessed via a SPARQL endpoint created in order to ease user access to required knowledge. CODA’s goal is to keep everyone informed about the pandemic in a fast and easy manner and avoid spreading misinformation to the general public.
                </p>
            </blockquote>
        </section>
        <section id="technology-stack">
            <h2>2. Technology Stack</h2>
            <h3>FRONT-END</h3>
            <blockquote>
                <p><b><a href="https://getbootstrap.com/">Bootstrap</a></b> - a free and open-source CSS framework directed at responsive, mobile-first front-end web development</p>
                <p><b><a href="https://flask.palletsprojects.com/en/1.1.x/">Flask</a></b> - a python micro web framework</p>
                <p><b><a href="https://www.chartjs.org/">Chart.js</a></b> - open source HTML5 charts </p>
            </blockquote>

            <h3>BACK-END</h3>
            <blockquote>
                <p><b><a href="https://flask.palletsprojects.com/en/1.1.x/">Flask</a></b> - a python micro web framework</p>
                <p><b><a href="https://santhoshse7en.github.io/news-fetch/">newsfetch </a></b> -  an open source, easy-to-use news crawler that extracts structured information from almost any news website </p>
                <p><b><a href="https://rdflib.readthedocs.io/en/stable/">RDFLib</a></b> - a Python library for working with RDF</p>
                <p><b><a href="https://sparqlwrapper.readthedocs.io/en/latest/">SPARQLWrapper</a></b> - python wrapper around a SPARQL service to remotely execute queries</p>
                <p><b><a href="https://www.w3.org/TR/rdf-sparql-query/">SPARQL</a></b> - a query language for interacting with RDF data </p>
                <p><b><a href="https://graphdb.ontotext.com/">GraphDB</a></b> - a Semantic Graph Database, compliant with W3C Standards </p>
            </blockquote>

        </section>
        <section id="microservices">
            <h2>3. Microservices</h2>
            <h3>Website</h3>
            <blockquote>
                <p>
                    TODO
                </p>
            </blockquote>

            <h3>Data Crawlers</h3>
            <blockquote>
                <p>
                    A data crawler or a web crawler is an Internet bot that systematically browses the World Wide Web, typically for creating search engine indices. CODA makes use of its own personalised data crawlers that collect Covid-19-related data from trusted news sources all over the internet.
                    The sources of information that are scraped by the data crawler come from official news articles sites, statistics sites and many more. A few examples are The Guardian, The New York Times and BBC News.
                </p>
                <h4>Metrics Consumer</h4>
                <p>TODO (mention covid19.api)</p>
                <h4>News Consumer</h4>
                <p>TODO </p>
                <h4>Articles Consumer</h4>
                <p>TODO (mention covid19.api)</p>
            </blockquote>

            <h3>REST API</h3>
            <blockquote>
                <p>
                <b>CodAPI</b>, the REST API developed for CODA is used by the other application services, but some
                endpoints are also available for users. This API offers the options to get various data on COVID19 numbers, news or articles present on the website
                as well as download it in CSV and JSON format.
                If the user wishes to see data on countries they can get the list of countries with available data, latest cases counts for a country,
                total cases in a day and in a date range.
                For news related to the pandemic, the user can request the latest news, filter news in a specific date range or by keywords.
                If article data is desired, the user can use a request to get the latest articles, filter them by type (dataset, journal, report etc.) or search for news
                containing a specific term in the title.
                TODO: add "pragmatic examples"
                </p>
                <h4><b>Communication between the REST API and THE OTHER SERVICES</b></h4>
                <p>The API is used by both the website microservice and the data crawlers. The crawlers used for retrieving data from the internet
                make an authenticated request to specific endpoints in order to add data in the graph database. These endpoints are not available for 'regular' users.
                The metrics crawler, for example, will first make a request to the API to get the date of the latest available cases in the graph for a specific country and
                then, use that date to filter out the information retrieved from external resources. By doing this, we ensure that the crawlers will only add new data in the graphs
                and no duplicates exist.</p>
                <p>The website on the other hand, makes requests to the API in order to retrieve the data necessary for populating the charts and getting the latest news and articles.
                The download functionality is also possible thanks to the API. The 'download' button available in the UI will generate a call to the appropriate
                endpoint of the <b>CodAPI</b>, which in turn will return the file in the specified format.</p>

                <h4><b>Communication between the USERS and the REST API</b></h4>
                Users can also retrieve data by making unauthenticated requests to the <b>CodAPI</b>. Possible use case scenarios include:
                    <p><b>Getting all available countries</b> - /api/countries</p>
                    <p><b>Getting all cases recorded in a specific country</b> - /api/country/RO</p>
                    <p><b>Getting the cases recorded in a specific day for a given country</b> - /api/country/RO?date=2020-01-23 </p>
                    <p><b>Getting the cases recorded in a date range for a given country</b> - /api/country/RO?from=2020-01-23&to=2020-01-26 </p>
                    <p><b>Getting the average number of cases that occurred on a daily basis in each month of 2020 for a given country</b> - /api/country/monthly/RO </p>
                <p><b>Downloading the cases info for a specified country</b> - /api/country/RO/download?format=csv</p>
                    <p><b>Searching for the latest news related to COVID-19*</b> - /api/news/latest </p>
                    <p><b>Filtering the news by their publication source*</b> - /api/news/filter/bbcNews </p>
                    <p><b>Searching for the latest research articles related to COVID-19*</b> - /api/articles/latest </p>
                    <p><b>Filtering the articles by their type*</b> - /api/articles/filter/journal%20contribution </p>
                    <p><b>Searching for articles containing a specific term in the title*</b> - /api/articles/page/1?search_term=covid </p>

                * all these endpoints will return the latest 20 results by default, but a limit and/or offset can be explicitly specified
                <p>The documentation of the API can be found <a href="https://coda-documentation.herokuapp.com/v1/ui/">here</a></p>
            </blockquote>
            <h3>Graph Handler</h3>
            <blockquote>
                <p>
                    The graph handler is an intermediate layer between the API and the graphs. It runs queries against
                    a SPARQL endpoint in order to get/insert data in the graphs. The SPARQLWrapper library is used as
                    a Python interface for the endpoint, creating the query invocation and converting the results into
                    JSON format.
                    For SPARQL query examples, see section <a href="#sparql">Accessing RDF Graph data using SPARQL</a>
                </p>
            </blockquote>
            <h3>GraphDB</h3>
            <blockquote>
                <p>
                    Ontotext GraphDB is a highly efficient and robust graph database with RDF and SPARQL support.
                    The three graphs that the application uses are stored in a repository on a remote GraphDB instance,
                    hosted in Google Cloud. The GraphDB Workbench (which is a web-based administration tool) is used for
                    managing the CODA repository and monitoring queries.
                </p>
            </blockquote>
            <figure typeof="sa:Image1">
                <img class="imagine" src="../Diagrams/arhitecture/Service Architecture.jpeg">
                <figcaption>
                    Service Architecture
                </figcaption>
            </figure>
        </section>
        <section id="implementation-logic">
            <h2>4. Implementation Logic</h2>
            <figure typeof="sa:Image1">
                <img class="imagine" src="../Diagrams/arhitecture/Backend UML.png">
                <figcaption>
                    Back-end - UML diagram
                </figcaption>
            </figure>
        </section>

        <section id="user-journey">
            <h2>5. User Journey</h2>
            <blockquote>
                <p>
                    CODA allows unauthenticated usage.
                </p>
            </blockquote>
            <h3>Guest User</h3>
            <blockquote>
                <p>
                    Guest users can browse the website and view every data available on it
                    ADD MORE DETAILS
                </p>
            <h3>Admin</h3>
            <blockquote>
                <p>
                    todo: details
                </p>
            </blockquote>
        </section>

        <section id="ontology">
            <h2>6. CODA Ontology and Vocabularies</h2>
            <blockquote>
                <p>
                    TODO: "considerations regarding the designed/reused RDF-based knowledge model(s) – for example, the expressiveness and real usage of the proposed and/or reused vocabulary, taxonomy or ontology in the context of the developed system;"
                </p>
            </blockquote>
            <h3>Used vocabularies</h3>
            <blockquote>
                <p>TODO description</p>
                <p>
                    More details on the vocabulary <a href="https://github.com/teodoragrosu/WADe-Project/blob/main/README.md#coda---used-vocabulary">here</a>
                </p>
                <ul>
                    <li><b>PREFIX schema</b>: https://schema.org/ </li>
                    <li><b>PREFIX owl</b>: http://www.w3.org/2002/07/owl# </li>
                    <li><b>PREFIX rdf</b>: http://www.w3.org/1999/02/22-rdf-syntax-ns# </li>
                    <li><b>PREFIX rdfs</b>: http://www.w3.org/2000/01/rdf-schema# </li>
                    <li><b>PREFIX xsd</b>: http://www.w3.org/2001/XMLSchema# </li>
                    <li><b>PREFIX ns1</b>: 	http://coda.org/resources/ </li>
                </ul>
            </blockquote>
            <h3>Countries graph</h3>
            <blockquote>
                <p>
                    description
                </p>
            </blockquote>
            <figure typeof="sa:Image1">
                <img class="imagine" src="../Diagrams/ontology/countries.jpg">
                <figcaption>
                    Countries
                </figcaption>
            </figure>
            <h3>News graph</h3>
            <blockquote>
                <p>
                    description
                </p>
            </blockquote>
            <figure typeof="sa:Image1">
                <img class="imagine" src="../Diagrams/ontology/news.jpeg">
                <figcaption>
                    News
                </figcaption>
            </figure>
            <h3>Articles graph</h3>
            <blockquote>
                <p>
                    description
                </p>
            </blockquote>
            <figure typeof="sa:Image1">
                <img class="imagine" src="../Diagrams/ontology/articles.jpeg">
                <figcaption>
                    Articles
                </figcaption>
            </figure>

        </section>
        <section id="sparql">
            <h2>7. Accessing RDF Graph data using SPARQL</h2>
            <blockquote>
                <p>
                    TODO
                </p>
            </blockquote>
            <h3>Adding new case nodes in the countries graph</h3>
            <figure typeof="sa:Image1">
                <img class="imagine" src="screen shots/add_new_cases.png">
            </figure>

            <h3>Getting the average number of cases per day, for each month in 2020 (for a specific country)</h3>
            <figure typeof="sa:Image1">
                <img class="imagine" src="screen shots/avg_cases_ro.png">
            </figure>

            <h3>Extracting news (latest to oldest)</h3>
            <figure typeof="sa:Image1">
                <img class="imagine" src="screen shots/get_news.png">
            </figure>

            <h3>Searching for a specific term in articles' titles</h3>
            <figure typeof="sa:Image1">
                <img class="imagine" src="screen shots/filter_covid.png">
            </figure>

        </section>
    </article>
</body>
</html>